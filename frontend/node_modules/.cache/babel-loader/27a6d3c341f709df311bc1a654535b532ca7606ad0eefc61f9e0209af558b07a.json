{"ast":null,"code":"import _regeneratorRuntime from\"/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Modal,Button,Form}from'react-bootstrap';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ResumeUploadModal=function ResumeUploadModal(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var token=useSelector(function(state){return state.auth.token;});// Retrieve the token from the auth slice\nvar handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var handleFileUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var file,formData,response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();file=e.target.elements.resumeFile.files[0];if(file){_context.next=6;break;}console.error(\"No file selected\");setMessage(\"Please select a file to upload.\");return _context.abrupt(\"return\");case 6:formData=new FormData();formData.append(\"resume\",file);_context.prev=8;_context.next=11;return fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/import-resume\"),{method:\"POST\",body:formData,headers:{'Authorization':\"Bearer \".concat(token)// Include the token in the request headers\n}});case 11:response=_context.sent;if(response.ok){_context.next=14;break;}throw new Error(\"HTTP error! Status: \".concat(response.status));case 14:_context.next=16;return response.json();case 16:result=_context.sent;console.log(\"Upload successful:\",result);setMessage(\"Resume successfully uploaded.\");_context.next=25;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](8);console.error(\"Upload error:\",_context.t0);setMessage(\"Upload failed: \".concat(_context.t0.message));case 25:case\"end\":return _context.stop();}},_callee,null,[[8,21]]);}));return function handleFileUpload(_x){return _ref.apply(this,arguments);};}();try{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleShow,children:\"Import R\\xE9sum\\xE9\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,animation:false,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Import Resume\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(Form,{onSubmit:handleFileUpload,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"resumeFile\",children:\"Upload your r\\xE9sum\\xE9\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",id:\"resumeFile\",accept:\".pdf,.doc,.docx\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Upload\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info mt-3\",children:message})]})]})]});}catch(error){console.error(error);}};export default ResumeUploadModal;","map":{"version":3,"names":["React","useState","Modal","Button","Form","useSelector","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResumeUploadModal","_useState","_useState2","_slicedToArray","show","setShow","_useState3","_useState4","message","setMessage","token","state","auth","handleClose","handleShow","handleFileUpload","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","file","formData","response","result","wrap","_callee$","_context","prev","next","preventDefault","target","elements","resumeFile","files","console","error","abrupt","FormData","append","fetch","concat","process","env","REACT_APP_API_URL","method","body","headers","sent","ok","Error","status","json","log","t0","stop","_x","apply","arguments","children","variant","onClick","onHide","animation","Header","closeButton","Title","Body","onSubmit","Group","className","Label","htmlFor","Control","type","id","accept"],"sources":["/app/src/components/ResumeUploadModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport { useSelector } from 'react-redux';\n\nconst ResumeUploadModal = () => {\n  const [show, setShow] = useState(false);\n  const [message, setMessage] = useState('');\n\n  const token = useSelector((state) => state.auth.token); // Retrieve the token from the auth slice\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const handleFileUpload = async (e) => {\n    e.preventDefault();\n    const file = e.target.elements.resumeFile.files[0];\n    if (!file) {\n      console.error(\"No file selected\");\n      setMessage(\"Please select a file to upload.\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"resume\", file);\n\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/import-resume`, {\n        method: \"POST\",\n        body: formData,\n        headers: {\n          'Authorization': `Bearer ${token}` // Include the token in the request headers\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      console.log(\"Upload successful:\", result);\n      setMessage(\"Resume successfully uploaded.\");\n    } catch (error) {\n      console.error(\"Upload error:\", error);\n      setMessage(`Upload failed: ${error.message}`);\n    }\n  };\n\n  try {\n  return (\n    <>\n      <Button variant=\"primary\" onClick={handleShow}>\n        Import Résumé\n      </Button>\n\n      <Modal show={show} onHide={handleClose} animation={false}>\n        <Modal.Header closeButton>\n          <Modal.Title>Import Resume</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form onSubmit={handleFileUpload}>\n            <Form.Group className=\"mb-3\">\n              <Form.Label htmlFor=\"resumeFile\">Upload your résumé</Form.Label>\n              <Form.Control\n                type=\"file\"\n                id=\"resumeFile\"\n                accept=\".pdf,.doc,.docx\"\n              />\n            </Form.Group>\n            <Button variant=\"primary\" type=\"submit\">\n              Upload\n            </Button>\n          </Form>\n          {message && <div className=\"alert alert-info mt-3\">{message}</div>}\n        </Modal.Body>\n      </Modal>\n    </>\n  );\n} catch (error) {\n  console.error(error);\n}\n};\n\nexport default ResumeUploadModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}