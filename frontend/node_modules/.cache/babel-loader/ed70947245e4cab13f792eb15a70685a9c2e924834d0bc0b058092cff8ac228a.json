{"ast":null,"code":"import _regeneratorRuntime from\"/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegForm=function RegForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),fullName=_useState2[0],setFullName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),successMessage=_useState12[0],setSuccessMessage=_useState12[1];// State for success message\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var user,API_BASE_URL,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();// Clear any existing messages\nsetErrorMessage(null);setSuccessMessage(null);if(!(password!==confirmPassword)){_context.next=6;break;}setErrorMessage(\"Passwords do not match!\");return _context.abrupt(\"return\");case 6:user={email:email,password:password,profile:{fullName:fullName// This places fullName inside the profile object, as expected by your Mongoose model.\n}};_context.prev=7;API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5001/api';_context.next=11;return fetch(\"\".concat(API_BASE_URL,\"/register\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(user)// Send the structured user object\n});case 11:response=_context.sent;_context.next=14;return response.json();case 14:data=_context.sent;if(response.ok){// Handle success\nsetSuccessMessage(data.message||\"Registered successfully!\");// Set success message\ndocument.querySelector('.modal button.btn-close').click();}else{setErrorMessage(data.message||\"Registration failed. Please try again.\");}_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](7);console.error(\"Failed to register:\",_context.t0);setErrorMessage(\"Something went wrong! Please try again later.\");case 22:case\"end\":return _context.stop();}},_callee,null,[[7,18]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-4 p-md-5 border rounded-3 bg-light text-dark\",children:[errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:errorMessage}),successMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success\",role:\"alert\",children:[\" \",successMessage]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"floatingFullName\",placeholder:\"John Doe\",value:fullName// Add this line\n,onChange:function onChange(e){return setFullName(e.target.value);}// And this line\n,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingFullName\",children:\"Full Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"floatingInput\",placeholder:\"name@example.com\",value:email// Add this line\n,onChange:function onChange(e){return setEmail(e.target.value);}// And this line\n,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"Email address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"floatingPassword\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingPassword\",children:\"Password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"floatingConfirmPassword\",placeholder:\"Confirm Password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingConfirmPassword\",children:\"Confirm Password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox mb-3\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:\"remember-me\"}),\" Remember me\"]})}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-lg btn-primary\",type:\"submit\",children:\"Sign Up for Free\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"By clicking Sign up, you agree to the terms of use.\"})]});};export default RegForm;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","RegForm","_useState","_useState2","_slicedToArray","fullName","setFullName","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","confirmPassword","setConfirmPassword","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","successMessage","setSuccessMessage","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","user","API_BASE_URL","response","data","wrap","_callee$","_context","prev","next","preventDefault","abrupt","profile","process","env","REACT_APP_API_URL","fetch","concat","method","headers","body","JSON","stringify","sent","json","ok","message","document","querySelector","click","t0","console","error","stop","_x","apply","arguments","onSubmit","className","children","role","type","id","placeholder","value","onChange","e","target","required","htmlFor"],"sources":["/app/src/components/RegForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\n\nconst RegForm = () => {\n  const [fullName, setFullName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null); // State for success message\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    // Clear any existing messages\n    setErrorMessage(null);\n    setSuccessMessage(null);\n\n    if (password !== confirmPassword) {\n      setErrorMessage(\"Passwords do not match!\");\n      return;\n    }\n\n    const user = {\n      email,\n      password,\n      profile: {\n        fullName, // This places fullName inside the profile object, as expected by your Mongoose model.\n      },\n    };\n\n    try {\n      const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n\n      const response = await fetch(`${API_BASE_URL}/register`, {\n\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(user), // Send the structured user object\n\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        // Handle success\n        setSuccessMessage(data.message || \"Registered successfully!\"); // Set success message\n        document.querySelector('.modal button.btn-close').click();\n\n      } else {\n        setErrorMessage(data.message || \"Registration failed. Please try again.\");\n      }\n    } catch (error) {\n      console.error(\"Failed to register:\", error);\n      setErrorMessage(\"Something went wrong! Please try again later.\");\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-4 p-md-5 border rounded-3 bg-light text-dark\">\n      {errorMessage && (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          {errorMessage}\n        </div>\n      )}\n      {successMessage && (\n        <div className=\"alert alert-success\" role=\"alert\"> {/* Bootstrap class for success */}\n          {successMessage}\n        </div>\n      )}\n      {/* ... rest of the form fields ... */}\n           {/* Full Name Field */}\n           <div className=\"form-floating mb-3\">\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          id=\"floatingFullName\"\n          placeholder=\"John Doe\"\n          value={fullName} // Add this line\n          onChange={(e) => setFullName(e.target.value)} // And this line\n          required\n        />\n        <label htmlFor=\"floatingFullName\">Full Name</label>\n      </div>\n\n      {/* Email Field */}\n      <div className=\"form-floating mb-3\">\n        <input\n          type=\"email\"\n          className=\"form-control\"\n          id=\"floatingInput\"\n          placeholder=\"name@example.com\"\n          value={email} // Add this line\n          onChange={(e) => setEmail(e.target.value)} // And this line\n          required\n        />\n        <label htmlFor=\"floatingInput\">Email address</label>\n      </div>\n\n      {/* Password Field */}\n      <div className=\"form-floating mb-3\">\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          id=\"floatingPassword\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <label htmlFor=\"floatingPassword\">Password</label>\n      </div>\n\n      {/* Confirm Password Field */}\n      <div className=\"form-floating mb-3\">\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          id=\"floatingConfirmPassword\"\n          placeholder=\"Confirm Password\"\n          value={confirmPassword}\n          onChange={(e) => setConfirmPassword(e.target.value)}\n          required\n        />\n        <label htmlFor=\"floatingConfirmPassword\">Confirm Password</label>\n      </div>\n\n      {/* Remember Me Checkbox */}\n      <div className=\"checkbox mb-3\">\n        <label>\n          <input type=\"checkbox\" value=\"remember-me\" /> Remember me\n        </label>\n      </div>\n\n      {/* Submit Button */}\n      <button className=\"w-100 btn btn-lg btn-primary\" type=\"submit\">\n        Sign Up for Free\n      </button>\n      <hr className=\"my-4\" />\n      <small className=\"text-muted\">\n        By clicking Sign up, you agree to the terms of use.\n      </small>\n    </form>\n  );\n};\n\nexport default RegForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}