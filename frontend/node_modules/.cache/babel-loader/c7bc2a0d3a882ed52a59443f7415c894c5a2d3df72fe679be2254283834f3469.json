{"ast":null,"code":"//dashboardthunks.js\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { updateItemById, appendNewItem, removeItemById, setDashboardData\n\n// ... other import actions ...\n} from \"../../reducers/dashboardSlice\";\nconst API_URL = process.env.REACT_APP_API_URL;\n\n// Helper function to get headers with Authorization token\nconst getAuthHeaders = token => ({\n  headers: {\n    Authorization: `Bearer ${token}`\n  }\n});\n\n// Universal Add Item Thunk\nexport const addItem = createAsyncThunk(\"dashboard/addItem\", async ({\n  section,\n  newData\n}, {\n  dispatch,\n  getState\n}) => {\n  const token = getState().auth.token;\n  try {\n    const response = await axios.post(`${API_URL}/dashboard/${section}`, newData, getAuthHeaders(token));\n    dispatch(appendNewItem({\n      section,\n      data: response.data\n    }));\n    return response.data;\n  } catch (error) {\n    console.error(`Error adding item to ${section}:`, error);\n  }\n});\n\n// Universal Edit Item Thunk\nexport const editItem = createAsyncThunk(\"dashboard/editItem\", async ({\n  section,\n  itemId,\n  newData\n}, {\n  dispatch,\n  getState\n}) => {\n  const token = getState().auth.token;\n  try {\n    const response = await axios.put(`${API_URL}/dashboard/${section}/${itemId}`, newData, getAuthHeaders(token));\n    dispatch(updateItemById({\n      section,\n      _id: itemId,\n      newData: response.data\n    }));\n    return response.data;\n  } catch (error) {\n    console.error(`Error editing item in ${section}:`, error);\n  }\n});\n\n// Universal Delete Item Thunk\nexport const deleteItem = createAsyncThunk(\"dashboard/deleteItem\", async ({\n  section,\n  itemId\n}, {\n  dispatch,\n  getState\n}) => {\n  const token = getState().auth.token;\n  try {\n    const response = await axios.delete(`${API_URL}/dashboard/${section}/${itemId}`, getAuthHeaders(token));\n    if (response.status === 200) {\n      dispatch(removeItemById({\n        section,\n        itemId\n      }));\n    }\n  } catch (error) {\n    console.error(`Error deleting item from ${section}:`, error);\n  }\n});\n\n// Thunk for fetching the user's portfolio\nexport const fetchUserPortfolio = createAsyncThunk(\"dashboard/fetchUserPortfolio\", async ({\n  identifier,\n  token\n}, {\n  dispatch\n}) => {\n  try {\n    const response = await axios.get(`${API_URL}/portfolio/${identifier}`, getAuthHeaders(token));\n    dispatch(setDashboardData(response.data));\n    return response.data;\n  } catch (error) {\n    console.error(\"fetchUserPortfolio error:\", error);\n  }\n});\n\n// Similar thunks for other sections like workExperience, skills, etc.\n\nexport const userDashboardThunks = {\n  editItem,\n  deleteItem,\n  addItem\n\n  // ... other thunks ...\n};","map":{"version":3,"names":["createAsyncThunk","axios","updateItemById","appendNewItem","removeItemById","setDashboardData","API_URL","process","env","REACT_APP_API_URL","getAuthHeaders","token","headers","Authorization","addItem","section","newData","dispatch","getState","auth","response","post","data","error","console","editItem","itemId","put","_id","deleteItem","delete","status","fetchUserPortfolio","identifier","get","userDashboardThunks"],"sources":["/app/src/components/UserDashboard/dashboardThunks.js"],"sourcesContent":["//dashboardthunks.js\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport {\n  updateItemById,\n  appendNewItem,\n  removeItemById,\n  setDashboardData,\n\n  // ... other import actions ...\n} from \"../../reducers/dashboardSlice\";\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\n// Helper function to get headers with Authorization token\nconst getAuthHeaders = (token) => ({\n  headers: { Authorization: `Bearer ${token}` },\n});\n\n// Universal Add Item Thunk\nexport const addItem = createAsyncThunk(\n  \"dashboard/addItem\",\n  async ({ section, newData }, { dispatch, getState }) => {\n    const token = getState().auth.token;\n    try {\n      const response = await axios.post(\n        `${API_URL}/dashboard/${section}`,\n        newData,\n        getAuthHeaders(token)\n      );\n      dispatch(appendNewItem({ section, data: response.data }));\n      return response.data;\n    } catch (error) {\n      console.error(`Error adding item to ${section}:`, error);\n    }\n  }\n);\n\n// Universal Edit Item Thunk\nexport const editItem = createAsyncThunk(\n  \"dashboard/editItem\",\n  async ({ section, itemId, newData }, { dispatch, getState }) => {\n    const token = getState().auth.token;\n    try {\n      const response = await axios.put(\n        `${API_URL}/dashboard/${section}/${itemId}`,\n        newData,\n        getAuthHeaders(token)\n      );\n      dispatch(updateItemById({ section, _id: itemId, newData: response.data }));\n      return response.data;\n    } catch (error) {\n      console.error(`Error editing item in ${section}:`, error);\n    }\n  }\n);\n\n// Universal Delete Item Thunk\nexport const deleteItem = createAsyncThunk(\n  \"dashboard/deleteItem\",\n  async ({ section, itemId }, { dispatch, getState }) => {\n    const token = getState().auth.token;\n    try {\n      const response = await axios.delete(\n        `${API_URL}/dashboard/${section}/${itemId}`,\n        getAuthHeaders(token)\n      );\n      if (response.status === 200) {\n        dispatch(removeItemById({ section, itemId }));\n      }\n    } catch (error) {\n      console.error(`Error deleting item from ${section}:`, error);\n    }\n  }\n);\n\n \n\n// Thunk for fetching the user's portfolio\nexport const fetchUserPortfolio = createAsyncThunk(\n  \"dashboard/fetchUserPortfolio\",\n  async ({ identifier, token }, { dispatch }) => {\n    try {\n      const response = await axios.get(\n        `${API_URL}/portfolio/${identifier}`,\n        getAuthHeaders(token)\n      );\n      dispatch(setDashboardData(response.data));\n      return response.data;\n    } catch (error) {\n      console.error(\"fetchUserPortfolio error:\", error);\n    }\n  }\n);\n\n// Similar thunks for other sections like workExperience, skills, etc.\n\nexport const userDashboardThunks = {\n  editItem,\n  deleteItem,\n  addItem,\n\n  // ... other thunks ...\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}