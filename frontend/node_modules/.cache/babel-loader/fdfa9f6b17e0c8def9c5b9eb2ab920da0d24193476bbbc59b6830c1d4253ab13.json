{"ast":null,"code":"//dashboardthunks.js\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { updateItemById, appendNewItem, removeItemById, setDashboardData\n\n// ... other import actions ...\n} from \"../../reducers/dashboardSlice\";\nconst API_URL = process.env.REACT_APP_API_URL;\n\n// Helper function to get headers with Authorization token\nconst getAuthHeaders = token => ({\n  headers: {\n    Authorization: `Bearer ${token}`\n  }\n});\n\n// Universal Add Item Thunk\nexport const addItem = createAsyncThunk(\"dashboard/addItem\", async ({\n  section,\n  newData\n}, {\n  dispatch,\n  getState\n}) => {\n  const token = getState().auth.token;\n  const userId = getState().auth.userId; // Assuming user ID is stored in auth state\n\n  try {\n    const response = await axios.post(`${API_URL}/dashboard/${section}`, newData, getAuthHeaders(token));\n    dispatch(appendNewItem({\n      section,\n      data: response.data\n    }));\n    // Dispatch fetchUserPortfolio after successfully adding the item\n    dispatch(fetchUserPortfolio({\n      identifier: userId,\n      token\n    }));\n    return response.data;\n  } catch (error) {\n    console.error(`Error adding item to ${section}:`, error);\n  }\n});\n\n// Universal Edit Item Thunk\nexport const editItem = createAsyncThunk(\"dashboard/editItem\", async ({\n  section,\n  itemId,\n  newData\n}, {\n  dispatch,\n  getState\n}) => {\n  const token = getState().auth.token;\n  try {\n    const response = await axios.put(`${API_URL}/dashboard/${section}/${itemId}`, newData, getAuthHeaders(token));\n    dispatch(updateItemById({\n      section,\n      _id: itemId,\n      newData: response.data\n    }));\n    return response.data;\n  } catch (error) {\n    console.error(`Error editing item in ${section}:`, error);\n  }\n});\n\n// Universal Delete Item Thunk\nexport const deleteItem = createAsyncThunk(\"dashboard/deleteItem\", async ({\n  section,\n  itemId\n}, {\n  dispatch,\n  getState\n}) => {\n  const token = getState().auth.token;\n  try {\n    const response = await axios.delete(`${API_URL}/dashboard/${section}/${itemId}`, getAuthHeaders(token));\n    if (response.status === 200) {\n      dispatch(removeItemById({\n        section,\n        itemId\n      }));\n    }\n  } catch (error) {\n    console.error(`Error deleting item from ${section}:`, error);\n  }\n});\n\n// Thunk for updating user settings\n// Thunk for updating user settings\nexport const updateSettings = createAsyncThunk(\"dashboard/updateSettings\", async (newSettings, {\n  dispatch,\n  getState\n}) => {\n  const token = getState().auth.token;\n  try {\n    const response = await axios.put(`${API_URL}/dashboard/settings`, newSettings, getAuthHeaders(token));\n    dispatch(setDashboardData({\n      ...getState().dashboard,\n      settings: response.data\n    }));\n    return response.data;\n  } catch (error) {\n    console.error(\"Error updating settings:\", error);\n  }\n});\n\n// Thunk for fetching the user's portfolio\nexport const fetchUserPortfolio = createAsyncThunk(\"dashboard/fetchUserPortfolio\", async ({\n  identifier,\n  token\n}, {\n  dispatch\n}) => {\n  try {\n    const response = await axios.get(`${API_URL}/portfolio/${identifier}`, getAuthHeaders(token));\n    dispatch(setDashboardData(response.data));\n    return response.data;\n  } catch (error) {\n    console.error(\"fetchUserPortfolio error:\", error);\n  }\n});\n\n// Similar thunks for other sections like workExperience, skills, etc.\n\nexport const userDashboardThunks = {\n  editItem,\n  deleteItem,\n  addItem\n\n  // ... other thunks ...\n};","map":{"version":3,"names":["createAsyncThunk","axios","updateItemById","appendNewItem","removeItemById","setDashboardData","API_URL","process","env","REACT_APP_API_URL","getAuthHeaders","token","headers","Authorization","addItem","section","newData","dispatch","getState","auth","userId","response","post","data","fetchUserPortfolio","identifier","error","console","editItem","itemId","put","_id","deleteItem","delete","status","updateSettings","newSettings","dashboard","settings","get","userDashboardThunks"],"sources":["/app/src/components/UserDashboard/dashboardThunks.js"],"sourcesContent":["//dashboardthunks.js\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport {\n  updateItemById,\n  appendNewItem,\n  removeItemById,\n  setDashboardData,\n\n  // ... other import actions ...\n} from \"../../reducers/dashboardSlice\";\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\n// Helper function to get headers with Authorization token\nconst getAuthHeaders = (token) => ({\n  headers: { Authorization: `Bearer ${token}` },\n});\n\n// Universal Add Item Thunk\nexport const addItem = createAsyncThunk(\n  \"dashboard/addItem\",\n  async ({ section, newData }, { dispatch, getState }) => {\n    const token = getState().auth.token;\n    const userId = getState().auth.userId; // Assuming user ID is stored in auth state\n\n    try {\n      const response = await axios.post(\n        `${API_URL}/dashboard/${section}`,\n        newData,\n        getAuthHeaders(token)\n      );\n      dispatch(appendNewItem({ section, data: response.data }));\n      // Dispatch fetchUserPortfolio after successfully adding the item\n      dispatch(fetchUserPortfolio({ identifier: userId, token }));\n\n      return response.data;\n    } catch (error) {\n      console.error(`Error adding item to ${section}:`, error);\n    }\n  }\n);\n\n// Universal Edit Item Thunk\nexport const editItem = createAsyncThunk(\n  \"dashboard/editItem\",\n  async ({ section, itemId, newData }, { dispatch, getState }) => {\n    const token = getState().auth.token;\n    try {\n      const response = await axios.put(\n        `${API_URL}/dashboard/${section}/${itemId}`,\n        newData,\n        getAuthHeaders(token)\n      );\n      dispatch(\n        updateItemById({ section, _id: itemId, newData: response.data })\n      );\n      return response.data;\n    } catch (error) {\n      console.error(`Error editing item in ${section}:`, error);\n    }\n  }\n);\n\n// Universal Delete Item Thunk\nexport const deleteItem = createAsyncThunk(\n  \"dashboard/deleteItem\",\n  async ({ section, itemId }, { dispatch, getState }) => {\n    const token = getState().auth.token;\n    try {\n      const response = await axios.delete(\n        `${API_URL}/dashboard/${section}/${itemId}`,\n        getAuthHeaders(token)\n      );\n      if (response.status === 200) {\n        dispatch(removeItemById({ section, itemId }));\n      }\n    } catch (error) {\n      console.error(`Error deleting item from ${section}:`, error);\n    }\n  }\n);\n\n// Thunk for updating user settings\n// Thunk for updating user settings\nexport const updateSettings = createAsyncThunk(\n  \"dashboard/updateSettings\",\n  async (newSettings, { dispatch, getState }) => {\n    const token = getState().auth.token;\n   \n\n    try {\n      const response = await axios.put(\n        `${API_URL}/dashboard/settings`,\n        newSettings,\n        getAuthHeaders(token)\n      );\n      dispatch(setDashboardData({ ...getState().dashboard, settings: response.data }));\n      return response.data;\n    } catch (error) {\n      console.error(\"Error updating settings:\", error);\n    }\n  }\n);\n\n\n// Thunk for fetching the user's portfolio\nexport const fetchUserPortfolio = createAsyncThunk(\n  \"dashboard/fetchUserPortfolio\",\n  async ({ identifier, token }, { dispatch }) => {\n    try {\n      const response = await axios.get(\n        `${API_URL}/portfolio/${identifier}`,\n        getAuthHeaders(token)\n      );\n      dispatch(setDashboardData(response.data));\n      return response.data;\n    } catch (error) {\n      console.error(\"fetchUserPortfolio error:\", error);\n    }\n  }\n);\n\n// Similar thunks for other sections like workExperience, skills, etc.\n\nexport const userDashboardThunks = {\n  editItem,\n  deleteItem,\n  addItem,\n\n  // ... other thunks ...\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}