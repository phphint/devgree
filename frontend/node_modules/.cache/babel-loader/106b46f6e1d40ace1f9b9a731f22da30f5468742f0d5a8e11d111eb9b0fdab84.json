{"ast":null,"code":"import _regeneratorRuntime from\"/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Location: /src/components/LoginForm.jsx\nimport React,{useState}from\"react\";import axios from\"axios\";import{useDispatch}from\"react-redux\";import{login}from\"../reducers/authSlice\";// Import the action\nimport{useNavigate}from\"react-router-dom\";// Import useNavigate hook\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(_ref){var handleClose=_ref.handleClose;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),remember=_useState6[0],setRemember=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),successMessage=_useState10[0],setSuccessMessage=_useState10[1];// New success message state\nvar dispatch=useDispatch();var navigate=useNavigate();// Initialize useNavigate hook\nvar handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var response,_response$data,token,userId,fullName,profilePicture,userEmail,bio,roleTitle,location,phone,videoIntro;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/login\"),{email:email,password:password});case 4:response=_context.sent;// Destructure the response to get all required fields\n_response$data=response.data,token=_response$data.token,userId=_response$data.userId,fullName=_response$data.fullName,profilePicture=_response$data.profilePicture,userEmail=_response$data.email,bio=_response$data.bio,roleTitle=_response$data.roleTitle,location=_response$data.location,phone=_response$data.phone,videoIntro=_response$data.videoIntro;// Store the token in localStorage\nlocalStorage.setItem(\"authToken\",token);// Dispatch the login action with all the fields\ndispatch(login({token:token,userId:userId,fullName:fullName,profilePicture:profilePicture,email:userEmail,// Rename to avoid shadowing the email state\nbio:bio,roleTitle:roleTitle,location:location,phone:phone,videoIntro:videoIntro}));setSuccessMessage(\"Logged in successfully!\");// Set success message on successful login\ndocument.querySelector(\".modal button.btn-close\").click();navigate(\"/dashboard\");// Redirect to /dashboard on successful login\nsetSuccessMessage(\"Logged in successfully!\");// Set success message on successful login\ndocument.querySelector(\".modal button.btn-close\").click();navigate(\"/dashboard\");// Redirect to /dashboard on successful login\n_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);if(_context.t0.response&&_context.t0.response.status===401){setErrorMessage(\"Unauthorized: Incorrect email or password.\");}else if(_context.t0.response&&_context.t0.response.data){console.error(\"Error logging in:\",_context.t0.response.data.message);setErrorMessage(_context.t0.response.data.message);}else{console.error(\"Error logging in:\",_context.t0.message);setErrorMessage(\"There was an unexpected error. Please try again.\");}case 19:case\"end\":return _context.stop();}},_callee,null,[[1,16]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-4 p-md-5 border rounded-3 bg-light text-dark\",children:[errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:errorMessage}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",role:\"alert\",children:successMessage}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"loginFloatingInput\",placeholder:\"name@example.com\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"loginFloatingInput\",children:\"Email address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"loginFloatingPassword\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"loginFloatingPassword\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox mb-3\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:\"remember-me\",checked:remember,onChange:function onChange(){return setRemember(function(prev){return!prev;});}}),\"Remember me\"]})}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-lg btn-primary\",type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"By logging in, you agree to our terms of use.\"})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","axios","useDispatch","login","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","handleClose","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","remember","setRemember","_useState7","_useState8","errorMessage","setErrorMessage","_useState9","_useState10","successMessage","setSuccessMessage","dispatch","navigate","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","response","_response$data","token","userId","fullName","profilePicture","userEmail","bio","roleTitle","location","phone","videoIntro","wrap","_callee$","_context","prev","next","preventDefault","post","concat","process","env","REACT_APP_API_URL","sent","data","localStorage","setItem","document","querySelector","click","t0","status","console","error","message","stop","_x","apply","arguments","onSubmit","className","children","role","type","id","placeholder","value","onChange","e","target","required","htmlFor","checked"],"sources":["/app/src/components/LoginForm.jsx"],"sourcesContent":["// Location: /src/components/LoginForm.jsx\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport { login } from \"../reducers/authSlice\"; // Import the action\nimport { useNavigate } from \"react-router-dom\"; // Import useNavigate hook\n\nconst LoginForm = ({ handleClose }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [remember, setRemember] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null); // New success message state\n  const dispatch = useDispatch();\n  const navigate = useNavigate(); // Initialize useNavigate hook\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      const response = await axios.post(\n        `${process.env.REACT_APP_API_URL}/login`,\n        {\n          email,\n          password,\n        }\n      );\n\n      // Destructure the response to get all required fields\n      const {\n        token,\n        userId,\n        fullName,\n        profilePicture,\n        email: userEmail,\n        bio,\n        roleTitle,\n        location,\n        phone,\n        videoIntro,\n      } = response.data;\n\n      // Store the token in localStorage\n      localStorage.setItem(\"authToken\", token);\n\n      // Dispatch the login action with all the fields\n      dispatch(\n        login({\n          token,\n          userId,\n          fullName,\n          profilePicture,\n          email: userEmail, // Rename to avoid shadowing the email state\n          bio,\n          roleTitle,\n          location,\n          phone,\n          videoIntro,\n        })\n      );\n\n      setSuccessMessage(\"Logged in successfully!\"); // Set success message on successful login\n\n      document.querySelector(\".modal button.btn-close\").click();\n      navigate(\"/dashboard\"); // Redirect to /dashboard on successful login\n\n      setSuccessMessage(\"Logged in successfully!\"); // Set success message on successful login\n\n      document.querySelector(\".modal button.btn-close\").click();\n      navigate(\"/dashboard\"); // Redirect to /dashboard on successful login\n    } catch (error) {\n      if (error.response && error.response.status === 401) {\n        setErrorMessage(\"Unauthorized: Incorrect email or password.\");\n      } else if (error.response && error.response.data) {\n        console.error(\"Error logging in:\", error.response.data.message);\n        setErrorMessage(error.response.data.message);\n      } else {\n        console.error(\"Error logging in:\", error.message);\n        setErrorMessage(\"There was an unexpected error. Please try again.\");\n      }\n    }\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"p-4 p-md-5 border rounded-3 bg-light text-dark\"\n    >\n      {errorMessage && (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          {errorMessage}\n        </div>\n      )}\n      {successMessage && (\n        <div className=\"alert alert-success\" role=\"alert\">\n          {successMessage}\n        </div>\n      )}\n      <div className=\"form-floating mb-3\">\n        <input\n          type=\"email\"\n          className=\"form-control\"\n          id=\"loginFloatingInput\"\n          placeholder=\"name@example.com\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n        <label htmlFor=\"loginFloatingInput\">Email address</label>\n      </div>\n      <div className=\"form-floating mb-3\">\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          id=\"loginFloatingPassword\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <label htmlFor=\"loginFloatingPassword\">Password</label>\n      </div>\n      <div className=\"checkbox mb-3\">\n        <label>\n          <input\n            type=\"checkbox\"\n            value=\"remember-me\"\n            checked={remember}\n            onChange={() => setRemember((prev) => !prev)}\n          />\n          Remember me\n        </label>\n      </div>\n      <button className=\"w-100 btn btn-lg btn-primary\" type=\"submit\">\n        Login\n      </button>\n      <hr className=\"my-4\" />\n      <small className=\"text-muted\">\n        By logging in, you agree to our terms of use.\n      </small>\n    </form>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}