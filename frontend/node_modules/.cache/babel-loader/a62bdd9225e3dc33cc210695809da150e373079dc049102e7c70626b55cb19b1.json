{"ast":null,"code":"import _regeneratorRuntime from\"/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useFormik}from\"formik\";import*as Yup from\"yup\";import{updateSettings}from\"./dashboardThunks\";// Create this thunk for updating settings\nimport TopNav from\"./TopNav/index\";import SideNav from\"./SideNav\";import Footer from\"../Footer\";import PortfolioDataFetcher from\"./hooks/PortfolioDataFetcher.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SettingsSchema=Yup.object().shape({privacy:Yup.string().required(\"Privacy setting is required\"),notifications:Yup.boolean(),profileSlug:Yup.string()// Add other fields as necessary\n});var Settings=function Settings(){var dispatch=useDispatch();var settings=useSelector(function(state){return state.dashboard.settings;})||{};// Add a fallback to an empty object\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSubmitting=_useState2[0],setIsSubmitting=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),successMessage=_useState4[0],setSuccessMessage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var formik=useFormik({initialValues:{privacy:settings.privacy||\"private\",notifications:settings.notifications||false,profileSlug:settings.profileSlug||\"\"// Initialize other fields if necessary\n},validationSchema:SettingsSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsSubmitting(true);setSuccessMessage(\"\");setErrorMessage(\"\");_context.prev=3;_context.next=6;return dispatch(updateSettings(values)).unwrap();case 6:// Assuming updateSettings is an async thunk\nsetSuccessMessage(\"Settings updated successfully!\");_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);setErrorMessage(\"Failed to update settings. Please try again.\");case 12:_context.prev=12;setIsSubmitting(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}},_callee,null,[[3,9,12,15]]);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TopNav,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(SideNav,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"col-md-9 ms-sm-auto col-lg-10 px-md-4 bg-white text-dark\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Settings\"}),/*#__PURE__*/_jsx(PortfolioDataFetcher,{}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:successMessage}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,className:\"container mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"privacy\",className:\"form-label\",children:\"Privacy\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"privacy\",name:\"privacy\",onChange:formik.handleChange,value:formik.values.privacy,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"public\",children:\"Public\"}),/*#__PURE__*/_jsx(\"option\",{value:\"private\",children:\"Private\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"notifications\",name:\"notifications\",onChange:formik.handleChange,checked:formik.values.notifications,className:\"form-check-input\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"notifications\",className:\"form-check-label\",children:\"Enable Notifications\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"profileSlug\",className:\"form-label\",children:\"Profile Slug\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"profileSlug\",name:\"profileSlug\",onChange:formik.handleChange,value:formik.values.profileSlug,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting,children:isSubmitting?\"Saving...\":\"Save Changes\"})]})]})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default Settings;","map":{"version":3,"names":["React","useState","useSelector","useDispatch","useFormik","Yup","updateSettings","TopNav","SideNav","Footer","PortfolioDataFetcher","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SettingsSchema","object","shape","privacy","string","required","notifications","boolean","profileSlug","Settings","dispatch","settings","state","dashboard","_useState","_useState2","_slicedToArray","isSubmitting","setIsSubmitting","_useState3","_useState4","successMessage","setSuccessMessage","_useState5","_useState6","errorMessage","setErrorMessage","formik","initialValues","validationSchema","onSubmit","_onSubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","wrap","_callee$","_context","prev","next","unwrap","t0","finish","stop","_x","apply","arguments","children","className","handleSubmit","htmlFor","id","name","onChange","handleChange","value","type","checked","disabled"],"sources":["/app/src/components/UserDashboard/Settings.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { updateSettings } from \"./dashboardThunks\"; // Create this thunk for updating settings\nimport TopNav from \"./TopNav/index\";\nimport SideNav from \"./SideNav\";\nimport Footer from \"../Footer\";\nimport  PortfolioDataFetcher  from \"./hooks/PortfolioDataFetcher.js\";\n\n\nconst SettingsSchema = Yup.object().shape({\n  privacy: Yup.string().required(\"Privacy setting is required\"),\n  notifications: Yup.boolean(),\n  profileSlug: Yup.string(),\n  // Add other fields as necessary\n});\n\nconst Settings = () => {\n  const dispatch = useDispatch();\n  const settings = useSelector((state) => state.dashboard.settings) || {}; // Add a fallback to an empty object\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const formik = useFormik({\n    initialValues: {\n      privacy: settings.privacy || \"private\",\n      notifications: settings.notifications || false,\n      profileSlug: settings.profileSlug || \"\",\n      // Initialize other fields if necessary\n    },\n    validationSchema: SettingsSchema,\n    onSubmit: async (values) => {\n      setIsSubmitting(true);\n      setSuccessMessage(\"\");\n      setErrorMessage(\"\");\n\n      try {\n        await dispatch(updateSettings(values)).unwrap(); // Assuming updateSettings is an async thunk\n        setSuccessMessage(\"Settings updated successfully!\");\n      } catch (error) {\n        setErrorMessage(\"Failed to update settings. Please try again.\");\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n  });\n\n  return (\n    <>\n      <TopNav />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <SideNav />\n          <main className=\"col-md-9 ms-sm-auto col-lg-10 px-md-4 bg-white text-dark\">\n            <h1>Settings</h1>\n            <PortfolioDataFetcher/>\n\n            {successMessage && (\n              <div className=\"alert alert-success\">{successMessage}</div>\n            )}\n            {errorMessage && (\n              <div className=\"alert alert-danger\">{errorMessage}</div>\n            )}\n\n            <form onSubmit={formik.handleSubmit} className=\"container mt-3\">\n              {/* Privacy Setting */}\n              <div className=\"mb-3\">\n                <label htmlFor=\"privacy\" className=\"form-label\">\n                  Privacy\n                </label>\n                <select\n                  id=\"privacy\"\n                  name=\"privacy\"\n                  onChange={formik.handleChange}\n                  value={formik.values.privacy}\n                  className=\"form-control\"\n                >\n                  <option value=\"public\">Public</option>\n                  <option value=\"private\">Private</option>\n                </select>\n              </div>\n\n              {/* Notifications Setting */}\n              <div className=\"mb-3 form-check\">\n                <input\n                  type=\"checkbox\"\n                  id=\"notifications\"\n                  name=\"notifications\"\n                  onChange={formik.handleChange}\n                  checked={formik.values.notifications}\n                  className=\"form-check-input\"\n                />\n                <label htmlFor=\"notifications\" className=\"form-check-label\">\n                  Enable Notifications\n                </label>\n              </div>\n\n              {/* Profile Slug */}\n              <div className=\"mb-3\">\n                <label htmlFor=\"profileSlug\" className=\"form-label\">\n                  Profile Slug\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"profileSlug\"\n                  name=\"profileSlug\"\n                  onChange={formik.handleChange}\n                  value={formik.values.profileSlug}\n                  className=\"form-control\"\n                />\n              </div>\n\n              {/* Add other fields as necessary */}\n\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary\"\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? \"Saving...\" : \"Save Changes\"}\n              </button>\n            </form>\n          </main>\n        </div>\n      </div>\n      <Footer />\n    </>\n  );\n};\n\nexport default Settings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}